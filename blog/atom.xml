<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://refine.dev/blog</id>
    <title>refine Blog</title>
    <updated>2022-02-21T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://refine.dev/blog"/>
    <subtitle>refine Blog</subtitle>
    <icon>https://refine.dev/img/refine_favicon.png</icon>
    <rights>Copyright © 2022 refine.</rights>
    <entry>
        <title type="html"><![CDATA[Build low-code, customizable and authorization ready (accesscontrol) admin panel with NestJS.]]></title>
        <id>how-to-access-control-with-nestjs</id>
        <link href="https://refine.dev/blog/how-to-access-control-with-nestjs"/>
        <updated>2022-02-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Build authorization ready admin panel with NestJS.]]></summary>
        <content type="html"><![CDATA[<p><strong>All the steps described are in this <a href="https://github.com/pankod/refine-hackathon/tree/main/job-posting-app">repo</a>.</strong></p><h2>Intro</h2><p>In the <a href="https://dev.to/pankod/build-fast-and-customizable-admin-panel-with-nestjs-291">previous blog post</a>, we used <a href="https://nestjs.com">nestjs</a> with an api and <a href="https://refine.dev">refine</a> in the admin panel. In this blog, let&#x27;s add <strong>authorization</strong> to both api and admin panel.</p><h2>Scenario</h2><p>Let&#x27;s have two roles in this system, they are <code>admin</code> and <code>editor</code>. In the API we prepared, we had two crud processes that we categorized as <code>companies</code> and <code>jobs</code>.</p><p>In this scenario; <code>editor</code> can only list companies, not any deletion or additions. Have the authority to list and create job postings. Let <code>admin</code> have authorization for all transactions.</p><h2>Authorization</h2><p>I used <a href="https://github.com/nestjsx/crud">nestjsx-crud</a> in the api we prepared. This library makes <code>CRUD</code> operations very easy. However, there is no support on the authorization side. That&#x27;s why I made use of the <a href="https://github.com/onury/accesscontrol">accesscontrol</a> library, which can be easily integrated with both <code>nestjs</code> and <code>refine</code>. </p><h2>Using AccessControl in API</h2><p>In the first step, let&#x27;s install <a href="https://github.com/nestjsx/nest-access-control">nestjs-access-control</a> in our project for <code>accesscontrol</code> integration to the api.</p><pre><code>npm install nest-access-control
</code></pre><p>I&#x27;m specifying a role as the <code>AccessControl</code> supports. According to our scenario, this should be as follows:</p><pre><code class="language-ts">// app.roles.ts

import { RolesBuilder } from &#x27;nest-access-control&#x27;;

export enum AppRoles {
  ADMIN = &#x27;ADMIN&#x27;,
  EDITOR = &#x27;EDITOR&#x27;,
}

export const roles: RolesBuilder = new RolesBuilder();

roles
  // editor
  .grant(AppRoles.EDITOR)
  .create(&#x27;jobs&#x27;)
  .update(&#x27;jobs&#x27;)
  // admin
  .grant(AppRoles.ADMIN)
  .extend(AppRoles.EDITOR)
  .create([&#x27;companies&#x27;])
  .update([&#x27;companies&#x27;])
  .delete([&#x27;companies&#x27;, &#x27;jobs&#x27;]);
</code></pre><p>Now I import <code>AccessControlModule</code>.</p><pre><code class="language-ts">  // app.module.ts

  import { roles } from &#x27;./app.roles&#x27;;

    @Module({
      imports: [
        ...
        AccessControlModule.forRoles(roles)
      ],
      controllers: [...],
      providers: [...],
    })
    export class AppModule {}
</code></pre><p>After determining the roles and privileges, we add the <code>ACGuard</code> class to the controller <code>UseGuards</code>.</p><pre><code class="language-ts">import { ACGuard } from &#x27;nest-access-control&#x27;;

...
@UseGuards(JwtAuthGuard, ACGuard)
@Controller(&#x27;companies&#x27;)
export class CompanyController implements CrudController&lt;CompanyEntity&gt; {}
...
</code></pre><p>Now we define resource and action for methods using <code>UseRoles</code> decorator. For example, we <strong>override</strong> for the <code>companies</code> resource and the <code>create</code> action as follows.</p><pre><code class="language-ts">import { ACGuard, UseRoles } from &#x27;nest-access-control&#x27;;

...
@UseGuards(JwtAuthGuard, ACGuard)
@Controller(&#x27;companies&#x27;)
export class CompanyController implements CrudController&lt;CompanyEntity&gt; {
  constructor(public service: CompanyService) {}

  get base(): CrudController&lt;CompanyEntity&gt; {
    return this;
  }

  @Override()
  @UseRoles({
    resource: &#x27;companies&#x27;,
    action: &#x27;create&#x27;,
  })
  createOne(
    @ParsedRequest() req: CrudRequest,
    @ParsedBody() dto: CompanyCreateDto,
  ) {
    return this.base.createOneBase(req, &lt;CompanyEntity&gt;dto);
  }
...
</code></pre><p>Similarly, we add this decorator for other methods.</p><p>After these operations, we complete the authorization process on the API side. Now we will do the authorization to the admin panel that we created with <code>refine</code>.</p><h2>Using AccessControl in refine (dashboard)</h2><p>refine; It supports many authorization tools, very flexible. What we need to do; Defining an <code>accessControlProvider</code> inside the <code>&lt;Refine /&gt;</code> component.</p><p><code>accessControlProvider</code> is implemented only one asynchronous method named &quot;can&quot; to be used to control whether the requested access is granted. This method takes <code>resource</code> and <code>action</code> with parameters.</p><pre><code class="language-tsx">// App.tsx

&lt;Refine
  ...
  accessControlProvider={{
    can: async ({ resource, action }) =&gt; {
      let can: boolean = false;
      const stringifyUser = localStorage.getItem(&#x27;refine-user&#x27;);
      if (stringifyUser) {
        const { roles } = JSON.parse(stringifyUser);

        roles.forEach((role: string) =&gt; {
          switch (action) {
            case &#x27;list&#x27;:
            case &#x27;show&#x27;:
              can = ac.can(role).read(resource).granted;
              break;
            case &#x27;create&#x27;:
              can = ac.can(role).create(resource).granted;
              break;
            case &#x27;edit&#x27;:
              can = ac.can(role).update(resource).granted;
              break;
            case &#x27;delete&#x27;:
              can = ac.can(role).delete(resource).granted;
              break;
          }
        });
      }
      return Promise.resolve({ can });
    },
  }}
/&gt;****
</code></pre><p>Now let me explain a little bit of this code I wrote. First we need the role of the logged in user. We saved it to local storage during login.
Then we match the refine <code>actions</code> with the accessControl&#x27;s actions and check its authorization with the <code>granted</code> method. I also resolve the returned result.</p><h2>Conclusion</h2><p>As a result, we have done the authorization on both the ui (dashboard) side and the api side.</p>]]></content>
        <author>
            <name>Yıldıray Ünlü</name>
            <uri>https://github.com/yildirayunlu</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Next.js E-commerce App with Strapi and Chakra UI]]></title>
        <id>handcrafted-nextjs-e-commerce-app-tutorial-strapi-chakra-ui</id>
        <link href="https://refine.dev/blog/handcrafted-nextjs-e-commerce-app-tutorial-strapi-chakra-ui"/>
        <updated>2022-02-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Learn the power of Refine for e-commerce with this quick & easy example. This step-by-step Refine SPA tutorial will get you started in no time.]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Implementing Dark Mode In Ant Design Using gulp]]></title>
        <id>how-to-add-darkmode-in-ant-design</id>
        <link href="https://refine.dev/blog/how-to-add-darkmode-in-ant-design"/>
        <updated>2022-02-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this article, we’ll learn how to efficiently implement dark mode in a Refine/Ant Design app, using gulp library and leveraging some React features like hooks]]></summary>
        <author>
            <name>Pierre van Male</name>
            <uri>https://github.com/vmalep</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to Import CSV File with React]]></title>
        <id>how-to-import-csv</id>
        <link href="https://refine.dev/blog/how-to-import-csv"/>
        <updated>2022-01-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this guide, I will show you how to import CSV files using React and JavaScript.]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to Multipart File Upload Using FormData with HTML]]></title>
        <id>how-to-multipart-upload</id>
        <link href="https://refine.dev/blog/how-to-multipart-upload"/>
        <updated>2021-12-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In this guide, I'm going to show you how to multipart files upload with using HTML and JavaScript]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to upload files from your HTML form using Base64 encoding]]></title>
        <id>how-to-base64-upload</id>
        <link href="https://refine.dev/blog/how-to-base64-upload"/>
        <updated>2021-12-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Uploading files using Base64 encoding is a common practice. In this guide, I'm going to show you how to upload files using base64 encoding]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Web3 with Refine]]></title>
        <id>web3-with-refine</id>
        <link href="https://refine.dev/blog/web3-with-refine"/>
        <updated>2021-12-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Sign-in Ethereum with Web3 and Refine]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Refine vs AdminBro - Comparison Admin Panel Framework]]></title>
        <id>refine-vs-adminbro</id>
        <link href="https://refine.dev/blog/refine-vs-adminbro"/>
        <updated>2021-11-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Refine vs AdminBro]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Refine vs React-Admin Which is Better for Your Project?]]></title>
        <id>refine-vs-react-admin</id>
        <link href="https://refine.dev/blog/refine-vs-react-admin"/>
        <updated>2021-11-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We will compare the features of refine and react-admin]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Create Your Easy Customizable Internal Issue Tracker With Refine and Supabase]]></title>
        <id>customizable-issue-tracker-with-refine-and-supabase</id>
        <link href="https://refine.dev/blog/customizable-issue-tracker-with-refine-and-supabase"/>
        <updated>2021-11-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This web application will  us to create issue and tasks for your team members. You will also be able to choose the priority of these tasks, their tags, and which person to assign them to.]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Create E-mail Subscription Panel with Refine and Strapi]]></title>
        <id>e-mail-subscription-panel-with-refine</id>
        <link href="https://refine.dev/blog/e-mail-subscription-panel-with-refine"/>
        <updated>2021-10-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We will make a web application that allows you to quickly create subscribers and send emails to your subscribers in a simple way. We’ll use refine to develop the frontend easily and strapi for backend solutions.]]></summary>
        <author>
            <name>Melih Ekinci</name>
            <uri>https://github.com/mlhekinci</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Migrating a React-Admin Application to Refine]]></title>
        <id>migrating-a-react-admin-application-to-refine</id>
        <link href="https://refine.dev/blog/migrating-a-react-admin-application-to-refine"/>
        <updated>2021-10-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Recently, our team decided to migrate a B2B admin panel of one of our customers from React-Admin to refine to battle test our new framework and improve our productivity.]]></summary>
        <author>
            <name>Umut Özdemir</name>
            <uri>https://github.com/miyavsu-limited</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Build Fast and Customizable Admin Panel with NestJS]]></title>
        <id>customizable-admin-panel-with-nestjs</id>
        <link href="https://refine.dev/blog/customizable-admin-panel-with-nestjs"/>
        <updated>2021-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We will prepare a simple `job-posting` application. We will also use the refine framework for the admin panel. The project will consist of two parts, api and admin.]]></summary>
        <author>
            <name>Yıldıray Ünlü</name>
            <uri>https://github.com/yildirayunlu</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Create a Feedback Admin panel in 15 Minutes with Refine and Strapi]]></title>
        <id>create-a-feedback-admin-panel-with-refine-and-strapi</id>
        <link href="https://refine.dev/blog/create-a-feedback-admin-panel-with-refine-and-strapi"/>
        <updated>2021-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We will quickly create an api with Strapi and then develop its frontend with refine. Thus, let's see how an admin panel can be created in a very short time with the perfect harmony of Strapi and refine.]]></summary>
        <author>
            <name>Salih Özdemir</name>
            <uri>https://github.com/salihozdemir</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Let's Build an App to Manage Your Hackathons with Refine]]></title>
        <id>manage-hackathons-with-refine</id>
        <link href="https://refine.dev/blog/manage-hackathons-with-refine"/>
        <updated>2021-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We'll be building a demo app to manage hackathons with refine.]]></summary>
        <author>
            <name>Muharrem Kocadere</name>
            <uri>https://github.com/mhrrmk</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Simple Web Application Example with Refine]]></title>
        <id>simple-web-application-with-refine</id>
        <link href="https://refine.dev/blog/simple-web-application-with-refine"/>
        <updated>2021-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Do you want to develop a web application quickly? You are at the right place!]]></summary>
        <author>
            <name>Aydın Akyol</name>
            <uri>https://github.com/biskuvit</uri>
        </author>
    </entry>
</feed>