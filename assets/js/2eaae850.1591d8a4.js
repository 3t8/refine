"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3608],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=a,f=u["".concat(p,".").concat(m)]||u[m]||c[m]||i;return n?r.createElement(f,o(o({ref:t},d),{},{components:n})):r.createElement(f,o({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},46478:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var r=n(87462),a=n(63366),i=(n(67294),n(3905)),o=["components"],l={id:"handling-filters",title:"Handling Filters"},p=void 0,s={unversionedId:"guides-and-concepts/data-provider/handling-filters",id:"guides-and-concepts/data-provider/handling-filters",isDocsHomePage:!1,title:"Handling Filters",description:"refine expects an array of type CrudFilters to filter results based on some field\u2019s values. So you can use more than one filter. Even the or operator can be used to combine multiple filters.",source:"@site/docs/guides-and-concepts/data-provider/handling-filters.md",sourceDirName:"guides-and-concepts/data-provider",slug:"/guides-and-concepts/data-provider/handling-filters",permalink:"/docs/guides-and-concepts/data-provider/handling-filters",editUrl:"https://github.com/pankod/refine/tree/master/documentation/docs/guides-and-concepts/data-provider/handling-filters.md",tags:[],version:"current",lastUpdatedBy:"Salih \xd6zdemir",lastUpdatedAt:1646749656,formattedLastUpdatedAt:"3/8/2022",frontMatter:{id:"handling-filters",title:"Handling Filters"},sidebar:"someSidebar",previous:{title:"React Hook Form",permalink:"/docs/packages/react-hook-form"},next:{title:"GraphQL",permalink:"/docs/guides-and-concepts/data-provider/graphql"}},d=[{value:"<code>CrudFilters</code>",id:"crudfilters",children:[],level:2},{value:"<code>LogicalFilters</code>",id:"logicalfilters",children:[],level:2},{value:"<code>ConditionalFilters</code>",id:"conditionalfilters",children:[],level:2},{value:"Combining Filters",id:"combining-filters",children:[],level:2},{value:"Handle filters in a data provider",id:"handle-filters-in-a-data-provider",children:[],level:2}],c={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"refine")," expects an array of type ",(0,i.kt)("inlineCode",{parentName:"p"},"CrudFilters")," to filter results based on some field\u2019s values. So you can use more than one filter. Even the ",(0,i.kt)("inlineCode",{parentName:"p"},"or")," operator can be used to combine multiple filters."),(0,i.kt)("h2",{id:"crudfilters"},(0,i.kt)("inlineCode",{parentName:"h2"},"CrudFilters")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CrudFilters")," is an array of objects with the following properties:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'// Supported operators:\ntype CrudOperators =\n    | "eq"\n    | "ne"\n    | "lt"\n    | "gt"\n    | "lte"\n    | "gte"\n    | "in"\n    | "nin"\n    | "contains"\n    | "ncontains"\n    | "containss"\n    | "ncontainss"\n    | "between"\n    | "nbetween"\n    | "null"\n    | "nnull"\n    | "or";\n\n// Supported filter types:\ntype LogicalFilter = {\n    field: string;\n    operator: Exclude<CrudOperators, "or">;\n    value: any;\n};\n\ntype ConditionalFilter = {\n    operator: "or";\n    value: LogicalFilter[];\n};\n\ntype CrudFilter = LogicalFilter | ConditionalFilter;\n//highlight-next-line\ntype CrudFilters = CrudFilter[];\n')),(0,i.kt)("h2",{id:"logicalfilters"},(0,i.kt)("inlineCode",{parentName:"h2"},"LogicalFilters")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"LogicalFilter")," works with ",(0,i.kt)("inlineCode",{parentName:"p"},"AND")," logic. For example, if you want to filter by ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," field and ",(0,i.kt)("inlineCode",{parentName:"p"},"age")," field, you can use the following filter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'const filter = [\n    {\n        field: "name",\n        operator: "eq",\n        value: "John",\n    },\n    {\n        field: "age",\n        operator: "lt",\n        value: 30,\n    },\n];\n')),(0,i.kt)("p",null,"Here the query will look like: ",(0,i.kt)("inlineCode",{parentName:"p"},'"name" = "John" AND "age" < 30')),(0,i.kt)("h2",{id:"conditionalfilters"},(0,i.kt)("inlineCode",{parentName:"h2"},"ConditionalFilters")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ConditionalFilter")," works only with ",(0,i.kt)("inlineCode",{parentName:"p"},"or")," operator and expects an array of ",(0,i.kt)("inlineCode",{parentName:"p"},"LogicalFilter")," objects in the ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," property. For example, if you want to filter by ",(0,i.kt)("inlineCode",{parentName:"p"},"age")," field or ",(0,i.kt)("inlineCode",{parentName:"p"},"createdAt")," field, you can use the following filter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'const filter = [\n    {\n        operator: "or",\n        value: [\n            {\n                field: "age",\n                operator: "eq",\n                value: 30,\n            },\n            {\n                field: "createdAt",\n                operator: "gte",\n                value: "2018-01-01",\n            },\n        ],\n    },\n];\n')),(0,i.kt)("p",null,"Here the query will look like: ",(0,i.kt)("inlineCode",{parentName:"p"},'"age" = 30 OR "createdAt" <= "2018-01-01"')),(0,i.kt)("h2",{id:"combining-filters"},"Combining Filters"),(0,i.kt)("p",null,"You can group multiple parameters in the same query using the logical filters or the conditional filters operators to filter results based on more than one criteria at the same time. This allows you to create more complex queries."),(0,i.kt)("p",null,"Example query: Find posts with 2 possible dates & a specific status"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'filter = [\n    {\n        operator: "or",\n        value: [\n            {\n                field: "createdAt",\n                operator: "eq",\n                value: "2022-01-01",\n            },\n            {\n                field: "createdAt",\n                operator: "eq",\n                value: "2022-01-02",\n            },\n        ],\n    },\n    {\n        operator: "eq",\n        field: "status",\n        value: "published",\n    },\n];\n')),(0,i.kt)("p",null,"Here the query will look like:",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("inlineCode",{parentName:"p"},'"status" == "published" AND ("createdAt" == "2022-01-01" OR "createdAt" == "2022-01-02")')),(0,i.kt)("h2",{id:"handle-filters-in-a-data-provider"},"Handle filters in a data provider"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'import { DataProvider } from "@pankod/refine-core";\n\nconst dataProvider = (): DataProvider => ({\n    getList: async ({ resource, pagination, filters, sort }) => {\n        if (filters) {\n            filters.map((filter) => {\n                if (filter.operator !== "or") {\n                    // Handle your logical filters here\n                    // console.log(typeof filter); // LogicalFilter\n                } else {\n                    // Handle your conditional filters here\n                    // console.log(typeof filter); // ConditionalFilter\n                }\n            });\n        }\n    },\n});\n')),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Data providers that support ",(0,i.kt)("inlineCode",{parentName:"p"},"or")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"and")," filtering logic are as follows:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/nestjsx-crud"},"NestJS CRUD")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/strapi"},"Strapi")," - ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/strapi-v4"},"Strapi v4")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/strapi-graphql"},"Strapi GraphQL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/supabase"},"Supabase")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/hasura"},"Hasura")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/pankod/refine/tree/master/packages/nhost"},"Nhost"))))))}u.isMDXComponent=!0}}]);