(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[40699,24654],{75419:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Controller:()=>r.Qr,FormProvider:()=>r.RV,appendErrors:()=>r.KN,get:()=>r.U2,set:()=>r.t8,useController:()=>r.bc,useFieldArray:()=>r.Dq,useForm:()=>o,useFormContext:()=>r.Gc,useFormState:()=>r.cl,useModalForm:()=>l,useReactHookForm:()=>r.cI,useStepsForm:()=>u,useWatch:()=>r.qo});var a=s(67294),r=s(87536),n=s(62399),o=({refineCoreProps:e,warnWhenUnsavedChanges:t,...s}={})=>{let{warnWhenUnsavedChanges:o,setWarnWhen:u}=(0,n.useWarnAboutChange)(),l=null!=t?t:o,i=(0,n.useForm)({...e}),{queryResult:d,onFinish:c,formLoading:h}=i,f=(0,r.cI)({...s}),{watch:m,reset:v,getValues:b,handleSubmit:p}=f;(0,a.useEffect)((()=>{var e;if(typeof(null==d?void 0:d.data)<"u"){let t={},s=Object.keys(b());Object.entries((null==(e=null==d?void 0:d.data)?void 0:e.data)||{}).forEach((([e,a])=>{s.includes(e)&&(t[e]=a)})),v(t)}}),[null==d?void 0:d.data]),(0,a.useEffect)((()=>{let e=m(((e,{type:t})=>{"change"===t&&C(e)}));return()=>e.unsubscribe()}),[m]);let C=e=>(l&&u(!0),e),g=(e,t)=>async s=>(u(!1),await p(e,t)(s));return{...f,handleSubmit:g,refineCore:i,saveButtonProps:{disabled:h,onClick:e=>{g(c,(()=>!1))(e)}}}},u=({stepsProps:e,...t}={})=>{let{defaultStep:s=0,isBackValidate:r=!1}=null!=e?e:{},[n,u]=(0,a.useState)(s),l=o({...t}),{trigger:i,getValues:d,reset:c,formState:{dirtyFields:h},refineCore:{queryResult:f}}=l;(0,a.useEffect)((()=>{var e;if(null!=f&&f.data){let t={},s=Object.keys(d());Object.entries(null==(e=null==f?void 0:f.data)?void 0:e.data).forEach((([e,a])=>{s.includes(e)&&(h[e]?t[e]=d(e):t[e]=a)})),c(t,{keepDirty:!0})}}),[null==f?void 0:f.data,n]);let m=e=>{let t=e;e<0&&(t=0),u(t)};return{...l,steps:{currentStep:n,gotoStep:async e=>{e!==n&&(e<n&&!r||await i())&&m(e)}}}},l=({modalProps:e,refineCoreProps:t,...s}={})=>{let r=(0,n.useTranslate)(),{resource:u,action:l}=null!=t?t:{},{defaultVisible:i=!1,autoSubmitClose:d=!0,autoResetForm:c=!0}=null!=e?e:{},h=o({refineCoreProps:t,...s}),{reset:f,refineCore:{onFinish:m,setId:v},saveButtonProps:b,handleSubmit:p}=h,{visible:C,show:g,close:w}=(0,n.useModal)({defaultVisible:i}),y=async e=>{await m(e),d&&w(),c&&f()},{resourceName:F}=(0,n.useResource)({resourceNameOrRouteName:u}),{warnWhen:k,setWarnWhen:S}=(0,n.useWarnAboutChange)(),W=(0,a.useCallback)((()=>{if(k){if(!window.confirm(r("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes.")))return;S(!1)}null==v||v(void 0),w()}),[k]),P=(0,a.useCallback)((e=>{null==v||v(e),g()}),[]),R=r(`${F}.titles.${l}`,void 0,`${(0,n.userFriendlyResourceName)(`${l} ${F}`,"singular")}`);return{modal:{submit:y,close:W,show:P,visible:C,title:R},...h,saveButtonProps:{...b,onClick:e=>p(y)(e)}}}},24654:()=>{}}]);