"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4017],{85162:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(67294),a=n(86010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(o,i),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(87462),a=n(67294),o=n(86010),i=n(72389),s=n(67392),l=n(7094),d=n(12466);const c="tabList__CuJ",u="tabItem_LNqP";function p(e){var t;const{lazy:n,block:i,defaultValue:p,values:m,groupId:f,className:g}=e,h=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=m??h.map((e=>{let{props:{value:t,label:n,attributes:r}}=e;return{value:t,label:n,attributes:r}})),v=(0,s.l)(k,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const x=null===p?p:p??(null==(t=h.find((e=>e.props.default)))?void 0:t.props.value)??h[0].props.value;if(null!==x&&!k.some((e=>e.value===x)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${x}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:y}=(0,l.U)(),[N,w]=(0,a.useState)(x),E=[],{blockElementScrollPositionUntilNextRender:C}=(0,d.o5)();if(null!=f){const e=b[f];null!=e&&e!==N&&k.some((t=>t.value===e))&&w(e)}const P=e=>{const t=e.currentTarget,n=E.indexOf(t),r=k[n].value;r!==N&&(C(t),w(r),null!=f&&y(f,String(r)))},T=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{const t=E.indexOf(e.currentTarget)+1;n=E[t]??E[0];break}case"ArrowLeft":{const t=E.indexOf(e.currentTarget)-1;n=E[t]??E[E.length-1];break}}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,o.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":i},g)},k.map((e=>{let{value:t,label:n,attributes:i}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>E.push(e),onKeyDown:T,onFocus:P,onClick:P},i,{className:(0,o.Z)("tabs__item",u,null==i?void 0:i.className,{"tabs__item--active":N===t})}),n??t)}))),n?(0,a.cloneElement)(h.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,i.Z)();return a.createElement(p,(0,r.Z)({key:String(t)},e))}},83375:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(67294),a=n(86010);const o="browserWindow_NI4q",i="browserWindowHeader_nZEk",s="buttons_iIn6",l="browserWindowAddressBar_K9wW",d="dot_VUxd",c="browserWindowMenuIcon_TbEo",u="bar_Ghqi",p="browserWindowBody_x6m3";function m(e){let{children:t,minHeight:n,url:m="http://localhost:3000",right:f}=e;return r.createElement("div",{className:o,style:{minHeight:n}},r.createElement("div",{className:i},r.createElement("div",{className:s},r.createElement("span",{className:d,style:{background:"#f25f58"}}),r.createElement("span",{className:d,style:{background:"#fbbe3c"}}),r.createElement("span",{className:d,style:{background:"#58cb42"}})),r.createElement("div",{className:(0,a.Z)(l,"text--truncate")},m),f||r.createElement("div",{className:c},r.createElement("div",null,r.createElement("span",{className:u}),r.createElement("span",{className:u}),r.createElement("span",{className:u})))),r.createElement("div",{className:p,style:{overflow:"hidden"}},t))}},19851:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(67294),a=n(90814),o=n(86010),i=n(52263);const s="playgroundContainer_ppBt",l="playgroundHeader_DsVj",d="headerButton_QPem",c="playgroundPreview_jwe9",u="playgroundEditorWrapper_AfoV";var p=n(83375);const m=e=>{let{if:t,maxWait:n,children:a}=e;const[o,i]=r.useState(t),[s]=r.useState(n);r.useEffect((()=>{!o&&t&&i(!0)}),[t]),r.useEffect((()=>{if(s){const e=setTimeout((()=>{i(!0)}),s);return()=>clearTimeout(e)}}),[s]);const l=r.useMemo((()=>o&&"function"==typeof a?a():null),[o]);if(void 0!==a&&"function"!=typeof a)throw new Error("Conditional component requires a function as a child");return l};var f=n(57482);const g=e=>{let{query:t,code:n}=e;const{siteConfig:{customFields:a}}=(0,i.Z)(),[o,s]=r.useState(void 0),l=r.useCallback((async e=>{if("undefined"!=typeof window&&window.Worker){const n=new Worker(`${location.protocol}//${location.host}/workers/lz-worker.js`);n.onmessage=function(e){let{data:r}=e;r.compressed&&s(`${a.LIVE_PREVIEW_URL}?code=${r.compressed}${t?`&query=${t}`:""}`),n.terminate()},n.postMessage({code:e})}}),[t]);return r.useEffect((()=>{l(n)}),[n,l]),o?r.createElement("iframe",{loading:"lazy",src:o,width:"100%",height:"100%",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"}}):null},h=r.memo(g,((e,t)=>e.code===t.code&&e.query===t.query));function k(e){let{hidden:t,code:n}=e;const[a,i]=r.useState(!t);return r.createElement(r.Fragment,null,r.createElement("div",{className:(0,o.Z)(l)},r.createElement("button",{className:(0,o.Z)(d),onClick:()=>i((e=>!e))},a?"Hide":"Show"," Code")),r.createElement("div",{className:(0,o.Z)(u),style:{maxHeight:a?"4500px":"0px",padding:a?void 0:"0px",transition:"0.3s max-height ease-in-out",overflow:"hidden"}},r.createElement(N,{language:"tsx",style:{borderRadius:0}},n)))}const v=e=>{let{children:t,disableScroll:n,previewHeight:a,hideCode:l=!1,url:d="http://localhost:3000"}=e;const u=String(t),{shared:g}=(0,f.dD)(),{visible:v}=(e=>{const t="// visible-block-start";let n=e.indexOf(t);n=n>0?n+t.length:0;let r=e.indexOf("// visible-block-end");r=r>0?r:e.length;const a=e.slice(0,n),o=e.slice(n,r).trimEnd().trimStart(),i=e.slice(r);return{visible:o,join:e=>`${a}\n${e}\n${i}`}})(`\n    ${g??""}\n    ${u}\n    `.replace(/\n$/,"")),x=r.useRef(null),b=function(e,t){void 0===t&&(t="0px");const[n,a]=r.useState(!1);return r.useEffect((()=>{const n=null==e?void 0:e.current,r=new IntersectionObserver((e=>{let[t]=e;a(t.isIntersecting)}),{rootMargin:t});return n&&r.observe(n),()=>{n&&r.unobserve(n)}}),[]),n}(x),{siteConfig:{customFields:y}}=(0,i.Z)();return r.createElement("div",{className:s},r.createElement(r.Fragment,null,r.createElement(p.Z,{url:d},r.createElement("div",{className:(0,o.Z)(c,"live-editor-wrapper"),style:{maxHeight:a,minHeight:a,overflow:n?"hidden":void 0,position:"relative"},ref:x},r.createElement(m,{if:b,maxWait:3e3},(()=>r.createElement(h,{code:`\n${g}\n${u}\n                                        `,query:n?"&disableScroll=true":void 0}))))),r.createElement(k,{hidden:l,code:v})))},x=r.memo(v,((e,t)=>String(e.children)===String(t.children))),b=e=>{let{children:t}=e;const{setShared:n}=(0,f.dD)();return r.useEffect((()=>{n(String(t))}),[t]),null},y=r.memo(b,((e,t)=>String(e.children)===String(t.children)));function N(e){return e.shared&&e.live?r.createElement(y,e):e.live?r.createElement(x,e):r.createElement(a.Z,e)}},84057:(e,t,n)=>{n.r(t),n.d(t,{Packages:()=>m,assets:()=>u,contentTitle:()=>d,default:()=>g,frontMatter:()=>l,metadata:()=>c,toc:()=>p});var r=n(87462),a=(n(67294),n(3905)),o=n(65488),i=n(85162),s=n(19851);const l={id:"migration-guide",title:"Migration Guide"},d=void 0,c={unversionedId:"migration-guide",id:"version-2.xx.xx/migration-guide",title:"Migration Guide",description:"1.0.XX to 2.0.XX",source:"@site/versioned_docs/version-2.xx.xx/migration-guide.md",sourceDirName:".",slug:"/migration-guide",permalink:"/docs/2.xx.xx/migration-guide",draft:!1,editUrl:"https://github.com/pankod/refine/tree/master/documentation/versioned_docs/version-2.xx.xx/migration-guide.md",tags:[],version:"2.xx.xx",lastUpdatedBy:"Salih \xd6zdemir",lastUpdatedAt:1637932308,formattedLastUpdatedAt:"Nov 26, 2021",frontMatter:{id:"migration-guide",title:"Migration Guide"},sidebar:"version-2.xx.xx/someSidebar",previous:{title:"JavaScript",permalink:"/docs/2.xx.xx/examples/javascript"},next:{title:"Testing",permalink:"/docs/2.xx.xx/testing"}},u={},p=[{value:"1.0.XX to 2.0.XX",id:"10xx-to-20xx",level:2},{value:"Motivation behind breaking changes",id:"motivation-behind-breaking-changes",level:3},{value:"<code>resources</code>",id:"resources",level:4},{value:"<code>routerProvider</code>",id:"routerprovider",level:4},{value:"Custom Pages",id:"custom-pages",level:4},{value:"\ud83e\ude84 Migrating your project automatically with refine-codemod \u2728 (recommended)",id:"-migrating-your-project-automatically-with-refine-codemod--recommended",level:2},{value:"Migrating your project manually",id:"migrating-your-project-manually",level:2},{value:"Updating the packages",id:"updating-the-packages",level:3},{value:"<code>&lt;Resource/&gt;</code> to <code>resources</code>",id:"resource-to-resources",level:3},{value:"<code>routerProvider</code>",id:"routerprovider-1",level:3},{value:"<code>Link</code> component",id:"link-component",level:3},{value:"Custom Pages",id:"custom-pages-1",level:3}],m=()=>{const e=["@pankod/refine","@pankod/refine-airtable","@pankod/refine-altogic","@pankod/refine-graphql","@pankod/refine-hasura","@pankod/refine-nestjsx-crud","@pankod/refine-nextjs-router","@pankod/refine-react-router","@pankod/refine-simple-rest","@pankod/refine-strapi","@pankod/refine-strapi-graphql","@pankod/refine-supabase"];return(0,a.kt)(o.Z,{defaultValue:"@pankod/refine",values:e.map((e=>({label:e,value:e}))),mdxType:"Tabs"},e.map((e=>(0,a.kt)(i.Z,{value:e,mdxType:"TabItem"},(0,a.kt)(s.Z,{className:"language-bash",mdxType:"CodeBlock"},`npm i ${e}@latest`)))))},f={toc:p,Packages:m};function g(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"10xx-to-20xx"},"1.0.XX to 2.0.XX"),(0,a.kt)("h3",{id:"motivation-behind-breaking-changes"},"Motivation behind breaking changes"),(0,a.kt)("h4",{id:"resources"},(0,a.kt)("inlineCode",{parentName:"h4"},"resources")),(0,a.kt)("p",null,"Making ",(0,a.kt)("inlineCode",{parentName:"p"},"resources")," property-based instead of component-based was necessary for Nextjs support. A property is also more flexible, dynamic and easier to configure compared to a component."),(0,a.kt)("h4",{id:"routerprovider"},(0,a.kt)("inlineCode",{parentName:"h4"},"routerProvider")),(0,a.kt)("p",null,"Router layer is abstracted from the core for mainly Nextjs support. This also creates the opportunity for any other router solution to be used."),(0,a.kt)("h4",{id:"custom-pages"},"Custom Pages"),(0,a.kt)("p",null,"This is also related to abstracting away the router layer from core. Differences between (currently two) router provider are so big that adding a layer to cover both cases (possibly more in the future) is much harder to implement and maintain compared to letting everyone handle it with their own conventions. This also has the huge benefit of allowing maximum configurability for every respective provider."),(0,a.kt)("h2",{id:"-migrating-your-project-automatically-with-refine-codemod--recommended"},"\ud83e\ude84 Migrating your project automatically with refine-codemod \u2728 (recommended)"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/pankod/refine/tree/master/packages/codemod"},(0,a.kt)("inlineCode",{parentName:"a"},"@pankod/refine-codemod"))," package handles the breaking changes for your project automatically, without any manual steps. It migrates your project from ",(0,a.kt)("inlineCode",{parentName:"p"},"1.x.x")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"2.x.x"),"."),(0,a.kt)("p",null,"Just ",(0,a.kt)("inlineCode",{parentName:"p"},"cd")," into root folder of your project (where ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," is contained) and run this command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"npx @pankod/refine-codemod refine1-to-refine2\n")),(0,a.kt)("p",null,"And it's done. Now your project uses ",(0,a.kt)("inlineCode",{parentName:"p"},"refine@2.x.x"),"."),(0,a.kt)("h2",{id:"migrating-your-project-manually"},"Migrating your project manually"),(0,a.kt)("h3",{id:"updating-the-packages"},"Updating the packages"),(0,a.kt)("p",null,"Packages used by your app must be updated to ",(0,a.kt)("inlineCode",{parentName:"p"},"^2.xx.xx")),(0,a.kt)(m,{mdxType:"Packages"}),(0,a.kt)("h3",{id:"resource-to-resources"},(0,a.kt)("inlineCode",{parentName:"h3"},"<Resource/>")," to ",(0,a.kt)("inlineCode",{parentName:"h3"},"resources")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<Resource/>")," is deprecated. Resources must be passed to ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/components/refine-config#resources"},(0,a.kt)("inlineCode",{parentName:"a"},"resources"))," prop instead."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@pankod/refine";\nimport dataProvider from "@pankod/refine-json-server";\nimport "@pankod/refine/dist/styles.min.css";\n\nimport { PostList, PostCreate, PostEdit, PostShow } from "pages/posts";\n\nconst API_URL = "https://api.fake-rest.refine.dev";\n\nconst App: React.FC = () => {\n    return (\n        <Refine\n            dataProvider={dataProvider(API_URL)}\n// highlight-start\n            resources={[\n                {\n                    name: "posts",\n                    list: PostList,\n                    create: PostCreate,\n                    edit: PostEdit,\n                    show: PostShow,\n                },\n            ]}\n// highlight-end\n        />\n    );\n};\n\nexport default App;\n')),(0,a.kt)("h3",{id:"routerprovider-1"},(0,a.kt)("inlineCode",{parentName:"h3"},"routerProvider")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/components/refine-config"},(0,a.kt)("inlineCode",{parentName:"a"},"<Refine/>"))," now requires a ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/providers/router-provider"},(0,a.kt)("inlineCode",{parentName:"a"},"routerProvider")),". You can use packages ",(0,a.kt)("strong",{parentName:"p"},"@pankod/refine-react-router")," or ",(0,a.kt)("strong",{parentName:"p"},"@pankod/refine-nextjs-router")," provided by ",(0,a.kt)("strong",{parentName:"p"},"refine"),"."),(0,a.kt)(o.Z,{defaultValue:"react",values:[{label:"React Router",value:"react"},{label:"Next.js Router",value:"nextjs"}],mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"react",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@pankod/refine";\nimport routerProvider from "@pankod/refine-react-router";\n\nconst App: React.FC = () => {\n    return <Refine routerProvider={routerProvider} />;\n};\n'))),(0,a.kt)(i.Z,{value:"nextjs",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@pankod/refine";\nimport routerProvider from "@pankod/refine-nextjs-router";\n\nconst App: React.FC = () => {\n    return <Refine routerProvider={routerProvider} />;\n};\n')))),(0,a.kt)("h3",{id:"link-component"},(0,a.kt)("inlineCode",{parentName:"h3"},"Link")," component"),(0,a.kt)("p",null,"If you imported ",(0,a.kt)("inlineCode",{parentName:"p"},"Link")," component from ",(0,a.kt)("inlineCode",{parentName:"p"},"@pankod/refine"),", now you have to switch to ",(0,a.kt)("inlineCode",{parentName:"p"},"@pankod/refine-react-router")," package to get the ",(0,a.kt)("inlineCode",{parentName:"p"},"Link")," component. Like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'// Old\n// import { ..., Link } from "@pankod/refine";\n\n// Now\nimport routerProvider from "@pankod/refine-react-router";\n\nconst Link = routerProvider.Link;\n')),(0,a.kt)("h3",{id:"custom-pages-1"},"Custom Pages"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"routes")," prop of ",(0,a.kt)("inlineCode",{parentName:"p"},"<Refine/>")," is deprecated. Custom routes must be handled by the router provider you choose. ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/guides-and-concepts/custom-pages"},"Refer to Custom Pages documentation for a detailed guide")))}g.isMDXComponent=!0}}]);